
### SEO & Metadata Standards
- EVERY page component in the `app` directory MUST include a metadata definition.
- For STATIC pages (e.g., /about, /login), use the static `export const metadata: Metadata` object.
- For DYNAMIC pages (e.g., [id], [slug]), use the `export async function generateMetadata()` function.
- Always include `title`, `description`, and `openGraph` tags.
- When generating metadata for dynamic routes, always fetch the relevant record from Prisma to ensure the title reflects the real-world data (e.g., Subject Name, Student Name).
- Pattern: "Topic Name | Grade Level | SchoolPlatform"

### Multitenancy & Data Isolation
- EVERY database query using Prisma MUST include a `where` clause for `schoolId` unless the user is a `SUPER_ADMIN`.
- For B2C (Individual) users, ensure queries are filtered by `userId`.
- NEVER generate a delete or update function that doesn't verify the owner's `schoolId` or `userId`.

### Curriculum Terminology
- NEVER hard-code the words "Grade," "Term," or "Subject" in the UI.
- ALWAYS use the dynamic labels from the `Curriculum` model (`yearLabel`, `termLabel`, `subjectLabel`).
- Example: Use `{curriculum.yearLabel}` instead of "Grade".

### UX Standards: Loading & Errors
- EVERY form submission or button click that triggers a Server Action MUST use a `loading` state (e.g., disable button, show spinner).
- ALWAYS use `sonner` (toast) to show a success or error message after a database mutation.
- Use "Skeletons" (Shadcn Skeleton) for initial page loading states to improve perceived performance.

### AI Content Generation
- When generating AI lessons, the output must ALWAYS be a structured JSON object.
- JSON structure for Lessons: `{ title: string, content: string, quiz: { question: string, options: string[], answer: string }[] }`.
- This ensures the frontend can parse the AI data without crashing.

### Next.js Architecture
- Favor Server Components by default. 
- Only use `'use client'` at the top of a file if it handles user interaction (buttons, inputs) or browser-only APIs.
- Keep the component tree lean; move data fetching to the Page level (Server Component) and pass data down as props.